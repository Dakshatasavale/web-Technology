<!DOCTYPE html>
<html>
<head>
  <title>Trivia Quiz App</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body { font-family: Arial; margin: 20px; }
    .question { margin-bottom: 20px; }
    .options { margin-left: 20px; }
    #quiz-container { display: none; }
    #score { font-weight: bold; font-size: 18px; color: green; }
  </style>
</head>
<body>

  <h2>Trivia Quiz App</h2>

  <label for="category">Select Category:</label>
  <select id="category">
    <option value="9">General Knowledge</option>
    <option value="11">Movies</option>
    <option value="15">Video Games</option>
    <option value="21">Sports</option>
    <option value="23">History</option>
  </select>

  <label for="difficulty">Select Difficulty:</label>
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
  </select>

  <button id="start-quiz">Start Quiz</button>

  <div id="quiz-container">
    <form id="quiz-form"></form>
    <button id="submit-quiz">Submit</button>
    <p id="score"></p>
  </div>

  <script>
    let correctAnswers = [];

    $('#start-quiz').click(function () {
      const category = $('#category').val();
      const difficulty = $('#difficulty').val();
      const url = `https://opentdb.com/api.php?amount=5&category=${category}&difficulty=${difficulty}&type=multiple`;

      $.getJSON(url, function (data) {
        const questions = data.results;
        $('#quiz-form').empty();
        correctAnswers = [];

        questions.forEach((q, index) => {
          const questionHtml = $('<div class="question"></div>');
          questionHtml.append(`<p>${index + 1}. ${q.question}</p>`);

          let options = q.incorrect_answers.concat(q.correct_answer);
          options = options.sort(() => Math.random() - 0.5); // Shuffle

          options.forEach(option => {
            const optionId = `q${index}_${option}`;
            questionHtml.append(`
              <div class="options">
                <input type="radio" name="q${index}" value="${option}" id="${optionId}">
                <label for="${optionId}">${option}</label>
              </div>
            `);
          });

          correctAnswers.push(q.correct_answer);
          $('#quiz-form').append(questionHtml);
        });

        $('#quiz-container').show();
        $('#score').text('');
      });
    });

    $('#submit-quiz').click(function () {
      let score = 0;

      correctAnswers.forEach((answer, index) => {
        const selected = $(`input[name=q${index}]:checked`).val();
        if (selected === answer) {
          score++;
        }
      });

      $('#score').text(`You scored ${score} out of ${correctAnswers.length}`);
    });
  </script>

</body>
</html>
